"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[8880],{25747:function(Ne,se,l){var a=l(32735),j=l(8471),he=l(60216),q=l.n(he),C=l(72850),Se=l(32031),rt=l(73779),z=l(35071),it=l(1176),t=l(88675),lt=l(15431),h=l(22348),He=l(7184),Be=l(43475),Ye=l(872),Qe=l(89135),ut=l(82512),dt=l(61642),ve=l(58656),Xe=l(83218),ct=l(17757),Te=l(43383);const d={biginteger:Se.Z,boolean:rt.Z,collectionType:z.Z,component:it.Z,contentType:z.Z,date:t.Z,datetime:t.Z,decimal:Se.Z,dynamiczone:lt.Z,email:h.Z,enum:He.Z,enumeration:He.Z,file:Be.Z,files:Be.Z,float:Se.Z,integer:Se.Z,json:Ye.Z,JSON:Ye.Z,media:Be.Z,number:Se.Z,password:Qe.Z,relation:ut.Z,richtext:dt.Z,singleType:ve.Z,string:Xe.Z,text:Xe.Z,time:t.Z,timestamp:t.Z,uid:ct.Z},Re=(0,j.ZP)(C.x)`
  svg {
    height: 100%;
    width: 100%;
  }
`,je=({type:Je,customField:_e,...We})=>{const mt=(0,Te.mZ)();let ze=d[Je];if(_e){const{icon:Ve}=mt.get(_e);Ve&&(ze=Ve)}return d[Je]?a.createElement(Re,{height:(0,Te.Q1)(24),width:(0,Te.Q1)(32),shrink:0,...We,"aria-hidden":!0},a.createElement(C.x,{as:ze})):null};je.defaultProps={customField:null},je.propTypes={type:q().string.isRequired,customField:q().string},se.Z=je},74753:function(Ne,se,l){var a=l(32735);const j=(0,a.createContext)();se.Z=j},51216:function(Ne,se,l){var a=l(32735);const j=(0,a.createContext)();se.Z=j},198:function(Ne,se,l){var a=l(32735),j=l(74753);const he=()=>(0,a.useContext)(j.Z);se.Z=he},32237:function(Ne,se,l){var a=l(32735),j=l(51216);const he=()=>(0,a.useContext)(j.Z);se.Z=he},97165:function(Ne,se,l){l.r(se),l.d(se,{default:function(){return ds}});var a=l(32735),j=l(53038),he=l(74758),q=l(67879),C=l(43383),Se=l(96709),rt=l(3633),z=l(25158),it=l(60216),t=l.n(it),lt=l(33795),h=l.n(lt),He=l(81346),Be=l.n(He),Ye=l(3040),Qe=l.n(Ye),ut=l(61868),dt=l.n(ut),ve=l(15062),Xe=l(6680),ct=l(74753),Te=l(32237),d=l(92318),Re=l(37087),je=l(23973),Je=l.n(je),_e=l(59578),We=l.n(_e),mt=l(85025),ze=l(31600),Ve=l(91215),$=l(87933),Oe=l(39291),pt=l(9026),W=l(72850),Le=l(3653),sa=l(11406),Y=l(41415),ra=l(89793),gt=l.n(ra),Ze=l(198),un=l(47328),ia=l(23940),Ce=l.n(ia);const la=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],ft=({intlLabel:e,name:n,onChange:o,value:r})=>{const{formatMessage:s}=(0,q.Z)(),i=r===null||r.length===0?s({id:"global.none",defaultMessage:"None"}):[...r].sort().map(c=>Ce()(c)).join(", "),u=e.id?s({id:e.id,defaultMessage:e.defaultMessage}):n;return a.createElement(un.Q,{id:"select1",label:u,customizeContent:()=>i,onChange:c=>{c.length>0?o({target:{name:n,value:c,type:"allowed-types-select"}}):o({target:{name:n,value:null,type:"allowed-types-select"}})},options:la,value:r||[]})};ft.defaultProps={value:null},ft.propTypes={intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,name:t().string.isRequired,onChange:t().func.isRequired,value:t().oneOfType([t().object,t().array])};var ua=ft,X=l(49372),dn=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),yt=l(861),bt=l(15335),et=l(5803),tt=l(25747),Ie=l(8471),cn=(0,Ie.ZP)(W.x)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`;const ht=({type:e})=>{const{formatMessage:n}=(0,q.Z)(),{onClickSelectField:o}=(0,Te.Z)(),r=()=>{o({attributeType:e,step:e==="component"?"1":null})};return a.createElement(cn,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:r},a.createElement($.k,null,a.createElement(tt.Z,{type:e}),a.createElement(W.x,{paddingLeft:4},a.createElement($.k,null,a.createElement(X.Z,{fontWeight:"bold"},n({id:(0,d.Z)(`attribute.${e}`),defaultMessage:e}))),a.createElement($.k,null,a.createElement(X.Z,{variant:"pi",textColor:"neutral600"},n({id:(0,d.Z)(`attribute.${e}.description`),defaultMessage:"A type for modeling data"}))))))};ht.defaultProps={type:"text"},ht.propTypes={type:t().string};var da=ht,mn=e=>{const n=e%2===1;return{paddingLeft:n?2:0,paddingRight:n?0:2}};const pn=({attributes:e})=>a.createElement(yt.k,{tagName:"button"},a.createElement($.k,{direction:"column",alignItems:"stretch",gap:8},e.map((n,o)=>a.createElement(bt.r,{key:o,gap:0},n.map((r,s)=>{const{paddingLeft:i,paddingRight:u}=mn(s);return a.createElement(et.P,{key:r,col:6,style:{height:"100%"}},a.createElement(W.x,{paddingLeft:i,paddingRight:u,paddingBottom:1,style:{height:"100%"}},a.createElement(da,{type:r})))})))));pn.propTypes={attributes:t().array.isRequired};var ca=pn,ma=l(50428),pa=l(33348),ga=l.n(pa),gn=l(99140),fa=l(25148),ya=l(54725),Fe=l(19406);const ba=(0,Ie.ZP)(W.x)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,ha=()=>a.createElement($.k,{wrap:"wrap",gap:4},[...Array(4)].map((e,n)=>a.createElement(ba,{key:`empty-card-${n}`,height:"138px",width:"375px",hasRadius:!0})));var va=()=>{const{formatMessage:e}=(0,q.Z)();return a.createElement(W.x,{position:"relative"},a.createElement(ha,null),a.createElement(W.x,{position:"absolute",top:6,width:"100%"},a.createElement($.k,{alignItems:"center",justifyContent:"center",direction:"column"},a.createElement(gn.J,{as:ya.Z,color:"",width:"160px",height:"88px"}),a.createElement(W.x,{paddingTop:6,paddingBottom:4},a.createElement(W.x,{textAlign:"center"},a.createElement(X.Z,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,d.Z)("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})),a.createElement(W.x,{paddingTop:4},a.createElement(X.Z,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,d.Z)("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."}))))),a.createElement(fa.Q,{to:`/marketplace?${ga().stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:a.createElement(Fe.Z,null)},e({id:(0,d.Z)("modalForm.empty.button"),defaultMessage:"Add custom fields"})))))};const fn=({customFieldUid:e,customField:n})=>{const{type:o,intlLabel:r,intlDescription:s}=n,{formatMessage:i}=(0,q.Z)(),{onClickSelectCustomField:u}=(0,Te.Z)(),c=()=>{u({attributeType:o,customFieldUid:e})};return a.createElement(cn,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:c},a.createElement($.k,null,a.createElement(tt.Z,{type:o,customField:e}),a.createElement(W.x,{paddingLeft:4},a.createElement($.k,null,a.createElement(X.Z,{fontWeight:"bold"},i(r))),a.createElement($.k,null,a.createElement(X.Z,{variant:"pi",textColor:"neutral600"},i(s))))))};fn.propTypes={customFieldUid:t().string.isRequired,customField:t().shape({type:t().string.isRequired,icon:t().func,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired}).isRequired,intlDescription:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired}).isRequired}).isRequired};var Ta=fn,Ca=()=>{const{formatMessage:e}=(0,q.Z)(),n=(0,C.mZ)(),o=Object.entries(n.getAll());if(!o.length)return a.createElement(va,null);const r=o.sort((s,i)=>s[1].name>i[1].name?1:-1);return a.createElement(yt.k,{tagName:"button"},a.createElement($.k,{direction:"column",alignItems:"stretch",gap:3},a.createElement(bt.r,{gap:0},r.map(([s,i],u)=>{const{paddingLeft:c,paddingRight:m}=mn(u);return a.createElement(et.P,{key:s,col:6,style:{height:"100%"}},a.createElement(W.x,{paddingLeft:c,paddingRight:m,paddingBottom:1,style:{height:"100%"}},a.createElement(Ta,{key:s,customFieldUid:s,customField:i})))})),a.createElement(ma.r,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0},e({id:(0,d.Z)("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"}))))};const yn=({attributes:e,forTarget:n,kind:o})=>{const{formatMessage:r}=(0,q.Z)(),s=(0,d.Z)("modalForm.tabs.default"),i=(0,d.Z)("modalForm.tabs.custom"),u=n.includes("component")?"component":o,c=(0,d.Z)(`modalForm.sub-header.chooseAttribute.${u}`);return a.createElement(ze.f,{padding:6},a.createElement(Ve.v,{label:r({id:(0,d.Z)("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple"},a.createElement($.k,{justifyContent:"space-between"},a.createElement(X.Z,{variant:"beta",as:"h2"},r({id:c,defaultMessage:"Select a field"})),a.createElement(Oe.m,null,a.createElement(Oe.O,null,r({id:s,defaultMessage:"Default"})),a.createElement(Oe.O,null,r({id:i,defaultMessage:"Custom"})))),a.createElement(W.x,{paddingBottom:6},a.createElement(pt.i,null)),a.createElement(Le.n,null,a.createElement(Le.x,null,a.createElement(ca,{attributes:e})),a.createElement(Le.x,null,a.createElement(Ca,null)))))};yn.propTypes={attributes:t().array.isRequired,forTarget:t().string.isRequired,kind:t().string.isRequired};var Ma=yn,bn=l(8284);const vt=({description:e,disabled:n,intlLabel:o,isCreating:r,name:s,onChange:i,value:u})=>{const{formatMessage:c}=(0,q.Z)(),[m,g]=(0,a.useState)(!1),f=o.id?c({id:o.id,defaultMessage:o.defaultMessage},{...o.values}):s,p=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=()=>g(N=>!N),v=()=>{i({target:{name:s,value:!1}}),T()},F=({target:{checked:N}})=>{if(!N&&!r){T();return}i({target:{name:s,value:N}})};return a.createElement(a.Fragment,null,a.createElement(bn.X,{checked:u,disabled:n,hint:p,name:s,onChange:F},f),a.createElement(C.QH,{isOpen:m,onToggleDialog:T,onConfirm:v,bodyText:{id:(0,d.Z)("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."},leftButtonText:{id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"},rightButtonText:{id:(0,d.Z)("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}}))};vt.defaultProps={description:null,disabled:!1,value:!1},vt.propTypes={description:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}),disabled:t().bool,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,isCreating:t().bool.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,value:t().bool};var Ea=vt,hn=l(55225),Tt=l(11299);const Ct=({actionType:e,attributeName:n,attributeType:o,categoryName:r,contentTypeKind:s,dynamicZoneTarget:i,forTarget:u,modalType:c,targetUid:m,customFieldUid:g})=>{const{formatMessage:f}=(0,q.Z)(),{modifiedData:p}=(0,Ze.Z)();let T,v=[];const F=p?.[u]?.[m]||p?.[u]||null;let N=F?.schema.displayName;if(c==="contentType"&&(T=s),["component","editCategory"].includes(c)&&(T="component"),["component","contentType"].includes(c)){let M=(0,d.Z)(`modalForm.component.header-${e}`);return c==="contentType"&&(M=(0,d.Z)(`modalForm.${s}.header-create`)),e==="edit"&&(M=(0,d.Z)("modalForm.header-edit")),a.createElement(hn.x,null,a.createElement($.k,null,a.createElement(W.x,null,a.createElement(tt.Z,{type:T})),a.createElement(W.x,{paddingLeft:3},a.createElement(X.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},f({id:M},{name:N})))))}v=[{label:N,info:{category:F?.category||null,name:F?.schema.displayName}}],c==="chooseAttribute"&&(T=["component","components"].includes(u)?"component":F.schema.kind),c==="addComponentToDynamicZone"&&(T="dynamiczone",v.push({label:i})),(c==="attribute"||c==="customField")&&(T=o,v.push({label:n})),c==="editCategory"&&(v=[{label:f({id:(0,d.Z)("modalForm.header.categories"),defaultMessage:"Categories"})},{label:r}]);const E=v.map(({label:M})=>M).join(",");return a.createElement(hn.x,null,a.createElement($.k,{gap:3},a.createElement(tt.Z,{type:T,customField:g}),a.createElement(Tt.O,{label:E},v.map((M,A)=>{const U=Ce()(M.label);if(!U)return null;const V=`${M.label}.${A}`;if(M.info?.category){const J=`${U} (${Ce()(M.info.category)} - ${Ce()(M.info.name)})`;return a.createElement(Tt.$,{key:V},J)}return a.createElement(Tt.$,{key:V},U)}))))};Ct.defaultProps={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,contentTypeKind:null,targetUid:null,customFieldUid:null},Ct.propTypes={actionType:t().string,attributeName:t().string,attributeType:t().string,categoryName:t().string,contentTypeKind:t().string,dynamicZoneTarget:t().string,forTarget:t().oneOf(["contentType","component","components"]),modalType:t().string.isRequired,targetUid:t().string,customFieldUid:t().string};var Ra=Ct;const Mt=({categoryName:e,deleteCategory:n,deleteComponent:o,deleteContentType:r,isAttributeModal:s,isCustomFieldModal:i,isComponentAttribute:u,isComponentToDzModal:c,isContentTypeModal:m,isCreatingComponent:g,isCreatingComponentAttribute:f,isCreatingComponentInDz:p,isCreatingComponentWhileAddingAField:T,isCreatingContentType:v,isCreatingDz:F,isComponentModal:N,isDzAttribute:L,isEditingAttribute:E,isEditingCategory:M,isInFirstComponentStep:A,onSubmitAddComponentAttribute:U,onSubmitAddComponentToDz:V,onSubmitCreateContentType:J,onSubmitCreateComponent:ne,onSubmitCreateDz:I,onSubmitEditAttribute:ge,onSubmitEditCategory:w,onSubmitEditComponent:G,onSubmitEditContentType:ye,onSubmitEditCustomFieldAttribute:K,onSubmitEditDz:qe,onClickFinish:te})=>{const{formatMessage:B}=(0,q.Z)();return c?p?a.createElement(Y.z,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),V(R,!0)},startIcon:a.createElement(Fe.Z,null)},B({id:(0,d.Z)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})):a.createElement(Y.z,{variant:"default",type:"submit",onClick:R=>{R.preventDefault(),V(R,!1)}},B({id:"global.finish",defaultMessage:"Finish"})):s&&L&&!F?a.createElement(Y.z,{variant:"default",type:"submit",onClick:R=>{R.preventDefault(),te(),qe(R,!1)}},B({id:"global.finish",defaultMessage:"Finish"})):s&&L&&F?a.createElement(a.Fragment,null,a.createElement(Y.z,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),I(R,!0)},startIcon:a.createElement(Fe.Z,null)},B({id:(0,d.Z)("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"}))):s&&u?A?a.createElement(Y.z,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),U(R,!0)}},B(f?{id:(0,d.Z)("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:(0,d.Z)("form.button.select-component"),defaultMessage:"Configure the component"})):a.createElement(a.Fragment,null,a.createElement(Y.z,{variant:"secondary",type:"submit",onClick:R=>{R.preventDefault(),U(R,!0)},startIcon:a.createElement(Fe.Z,null)},B(T?{id:(0,d.Z)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),a.createElement(Y.z,{variant:"default",type:"button",onClick:R=>{R.preventDefault(),te(),U(R,!1)}},B({id:"global.finish",defaultMessage:"Finish"}))):s&&!u&&!L?a.createElement(a.Fragment,null,a.createElement(Y.z,{type:E?"button":"submit",variant:"secondary",onClick:R=>{R.preventDefault(),ge(R,!0)},startIcon:a.createElement(Fe.Z,null)},B({id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),a.createElement(Y.z,{type:E?"submit":"button",variant:"default",onClick:R=>{R.preventDefault(),te(),ge(R,!1)}},B({id:"global.finish",defaultMessage:"Finish"}))):m?a.createElement(a.Fragment,null,!v&&a.createElement(a.Fragment,null,a.createElement(Y.z,{type:"button",variant:"danger",onClick:R=>{R.preventDefault(),r()}},B({id:"global.delete",defaultMessage:"Delete"})),a.createElement(Y.z,{type:"submit",variant:"default",onClick:R=>{R.preventDefault(),ye(R,!1)}},B({id:"global.finish",defaultMessage:"Finish"}))),v&&a.createElement(Y.z,{type:"submit",variant:"secondary",onClick:R=>{R.preventDefault(),J(R,!0)}},B({id:"global.continue",defaultMessage:"Continue"}))):N?a.createElement(a.Fragment,null,!g&&a.createElement(a.Fragment,null,a.createElement(Y.z,{type:"button",variant:"danger",onClick:R=>{R.preventDefault(),o()}},B({id:"global.delete",defaultMessage:"Delete"})),a.createElement(Y.z,{type:"submit",variant:"default",onClick:R=>{R.preventDefault(),G(R,!1)}},B({id:"global.finish",defaultMessage:"Finish"}))),g&&a.createElement(Y.z,{type:"submit",variant:"secondary",onClick:R=>{R.preventDefault(),ne(R,!0)}},B({id:"global.continue",defaultMessage:"Continue"}))):M?a.createElement(a.Fragment,null,a.createElement(Y.z,{type:"button",variant:"danger",onClick:R=>{R.preventDefault(),n(e)}},B({id:"global.delete",defaultMessage:"Delete"})),a.createElement(Y.z,{type:"submit",variant:"default",onClick:R=>{R.preventDefault(),w(R)}},B({id:"global.finish",defaultMessage:"finish"}))):i?a.createElement(a.Fragment,null,a.createElement(Y.z,{type:E?"button":"submit",variant:"secondary",onClick:R=>{R.preventDefault(),K(R,!0)},startIcon:a.createElement(Fe.Z,null)},B({id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),a.createElement(Y.z,{type:E?"submit":"button",variant:"default",onClick:R=>{R.preventDefault(),te(),K(R,!1)}},B({id:"global.finish",defaultMessage:"Finish"}))):null};Mt.defaultProps={categoryName:null,onClickFinish(){}},Mt.propTypes={categoryName:t().string,deleteCategory:t().func.isRequired,deleteComponent:t().func.isRequired,deleteContentType:t().func.isRequired,isAttributeModal:t().bool.isRequired,isCustomFieldModal:t().bool.isRequired,isComponentAttribute:t().bool.isRequired,isComponentModal:t().bool.isRequired,isComponentToDzModal:t().bool.isRequired,isContentTypeModal:t().bool.isRequired,isCreatingComponent:t().bool.isRequired,isCreatingComponentAttribute:t().bool.isRequired,isCreatingComponentInDz:t().bool.isRequired,isCreatingComponentWhileAddingAField:t().bool.isRequired,isCreatingContentType:t().bool.isRequired,isCreatingDz:t().bool.isRequired,isDzAttribute:t().bool.isRequired,isEditingAttribute:t().bool.isRequired,isEditingCategory:t().bool.isRequired,isInFirstComponentStep:t().bool.isRequired,onSubmitAddComponentAttribute:t().func.isRequired,onSubmitAddComponentToDz:t().func.isRequired,onSubmitCreateContentType:t().func.isRequired,onSubmitCreateComponent:t().func.isRequired,onSubmitCreateDz:t().func.isRequired,onSubmitEditAttribute:t().func.isRequired,onSubmitEditCategory:t().func.isRequired,onSubmitEditComponent:t().func.isRequired,onSubmitEditContentType:t().func.isRequired,onSubmitEditCustomFieldAttribute:t().func.isRequired,onSubmitEditDz:t().func.isRequired,onClickFinish:t().func};var Za=Mt,Aa=({modalType:e,forTarget:n,kind:o,actionType:r,step:s})=>{switch(e){case"chooseAttribute":return(0,d.Z)(`modalForm.sub-header.chooseAttribute.${n.includes("component")?"component":o||"collectionType"}`);case"attribute":return(0,d.Z)(`modalForm.sub-header.attribute.${r}${s!=="null"&&s!==null&&r!=="edit"?".step":""}`);case"customField":return(0,d.Z)(`modalForm.sub-header.attribute.${r}`);case"addComponentToDynamicZone":return(0,d.Z)("modalForm.sub-header.addComponentToDynamicZone");default:return(0,d.Z)("configurations")}};const Et=({actionType:e,modalType:n,forTarget:o,kind:r,step:s,attributeType:i,attributeName:u,customField:c})=>{const{formatMessage:m}=(0,q.Z)(),g=n==="customField"?c.intlLabel:{id:(0,d.Z)(`attribute.${i}`)};return a.createElement($.k,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1},a.createElement(X.Z,{as:"h2",variant:"beta"},m({id:Aa({actionType:e,forTarget:o,kind:r,step:s,modalType:n}),defaultMessage:"Add new field"},{type:Ce()(m(g)),name:Ce()(u),step:s})),a.createElement(X.Z,{variant:"pi",textColor:"neutral600"},m({id:(0,d.Z)(`attribute.${i}.description`),defaultMessage:"A type for modeling data"})))};Et.defaultProps={actionType:null,modalType:null,forTarget:null,kind:null,step:null,attributeType:null,attributeName:null,customField:null},Et.propTypes={actionType:t().string,modalType:t().string,forTarget:t().string,kind:t().string,step:t().string,attributeType:t().string,attributeName:t().string,customField:t().object};var xa=Et,nt=l(80084),at=l(84967);const Rt=({intlLabel:e,name:n,options:o,onChange:r,value:s})=>{const{formatMessage:i}=(0,q.Z)(),u=e.id?i({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):n,c=m=>{let g="";m==="true"&&(g=!0),m==="false"&&(g=!1),r({target:{name:n,value:g,type:"select-default-boolean"}})};return a.createElement(nt.P,{label:u,id:n,name:n,onChange:c,value:(s===null?"":s).toString()},o.map(({metadatas:{intlLabel:m,disabled:g,hidden:f},key:p,value:T})=>a.createElement(at.W,{key:p,value:T,disabled:g,hidden:f},m.defaultMessage)))};Rt.defaultProps={value:null},Rt.propTypes={intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,name:t().string.isRequired,onChange:t().func.isRequired,options:t().arrayOf(t().shape({metadatas:t().shape({intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired}).isRequired,disabled:t().bool,hidden:t().bool}).isRequired,key:t().oneOfType([t().string,t().number]).isRequired,value:t().oneOfType([t().string,t().number]).isRequired}).isRequired).isRequired,value:t().any};var Sa=Rt,Fa=l(30350);const Na=(0,Ie.ZP)($.k)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,Fa.k3)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${X.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,Zt=({intlLabel:e,name:n,onChange:o,radios:r,value:s})=>{const{formatMessage:i}=(0,q.Z)();return a.createElement($.k,{direction:"column",alignItems:"stretch",gap:2},a.createElement(X.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:n,as:"label"},i(e)),a.createElement(Na,{gap:4,alignItems:"stretch"},r.map(u=>a.createElement("label",{htmlFor:u.value.toString(),key:u.value,className:"container"},a.createElement("input",{id:u.value.toString(),name:n,className:"option-input",checked:u.value===s,value:u.value,key:u.value,onChange:o,type:"radio"}),a.createElement(W.x,{className:"option",padding:4},a.createElement($.k,null,a.createElement(W.x,{paddingRight:4},a.createElement("span",{className:"checkmark"})),a.createElement($.k,{direction:"column",alignItems:"stretch",gap:2},a.createElement(X.Z,{fontWeight:"bold"},i(u.title)),a.createElement(X.Z,{variant:"pi",textColor:"neutral600"},i(u.description)))))))))};Zt.defaultProps={radios:[]},Zt.propTypes={intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,name:t().string.isRequired,onChange:t().func.isRequired,radios:t().arrayOf(t().shape({title:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired}),description:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired}),value:t().any.isRequired})),value:t().oneOfType([t().string,t().bool]).isRequired};var At=Zt;const vn=({onChange:e,name:n,...o})=>{const r=s=>{const i=s.target.value!=="false";e({target:{name:n,value:i,type:"boolean-radio-group"}})};return a.createElement(At,{...o,name:n,onChange:r})};vn.propTypes={name:t().string.isRequired,onChange:t().func.isRequired};var Oa=vn,xt=l(10369),La=l(9900);const St=({error:e,intlLabel:n,modifiedData:o,name:r,onChange:s,value:i})=>{const{formatMessage:u}=(0,q.Z)(),[c,m]=(0,a.useState)(!!i||i===0),g=n.id?u({id:n.id,defaultMessage:n.defaultMessage},{...n.values}):r,f=o.type==="biginteger"?"text":"number",p=!o.type,T=e?u({id:e,defaultMessage:e}):"";return a.createElement($.k,{direction:"column",alignItems:"stretch",gap:2},a.createElement(bn.X,{id:r,name:r,onValueChange:v=>{s({target:{name:r,value:v?f==="text"?"0":0:null}}),m(L=>!L)},value:c},g),c&&a.createElement(W.x,{paddingLeft:6,style:{maxWidth:"200px"}},f==="text"?a.createElement(xt.o,{"aria-label":g,disabled:p,error:T,id:r,name:r,onChange:s,value:i===null?"":i}):a.createElement(La.Y,{"aria-label":g,disabled:p,error:T,id:r,name:r,onValueChange:v=>{s({target:{name:r,value:v,type:f}})},value:i||0})))};St.defaultProps={error:null,value:null},St.propTypes={error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,modifiedData:t().object.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,value:t().oneOfType([t().string,t().object,t().bool,t().number])};var Ia=St;const Tn=({onChange:e,...n})=>{const o=(0,C.lm)(),r=s=>{o({type:"info",message:{id:(0,d.Z)("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),e(s)};return a.createElement(At,{...n,onChange:r})};Tn.propTypes={onChange:t().func.isRequired};var Da=Tn,Ft=l(49561),Cn=l(34853),Q=l(91559);const Nt=({oneThatIsCreatingARelationWithAnother:e,target:n})=>{const{contentTypes:o,sortedContentTypesList:r}=(0,Ze.Z)(),s=(0,ve.I0)(),i=r.filter(dn),u=h()(o,[n,"plugin"],null),c=h()(o,[n,"schema","displayName"],"error");return a.createElement(Cn.O,{id:"label",label:`${c}
    ${u?`(from: ${u})`:""}`},i.map(({uid:m,title:g,restrictRelationsTo:f,plugin:p})=>{const T=()=>{const v=p?`${p}_${g}`:g;s({type:Q.aG,target:{value:m,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:v,targetContentTypeAllowedRelations:f}})};return a.createElement(Cn.s,{key:m,onClick:T},g,"\xA0",p&&a.createElement(a.Fragment,null,"(from: ",p,")"))}))};Nt.defaultProps={target:null},Nt.propTypes={oneThatIsCreatingARelationWithAnother:t().string.isRequired,target:t().string};var Pa=Nt;const Ot=({disabled:e,error:n,header:o,isMain:r,name:s,onChange:i,oneThatIsCreatingARelationWithAnother:u,target:c,value:m})=>a.createElement(W.x,{background:"neutral100",hasRadius:!0,borderColor:"neutral200"},a.createElement($.k,{paddingTop:r?4:1,paddingBottom:r?3:1,justifyContent:"center"},r?a.createElement(X.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},o):a.createElement(Pa,{target:c,oneThatIsCreatingARelationWithAnother:u})),a.createElement(pt.i,{background:"neutral200"}),a.createElement(W.x,{padding:4},a.createElement(C.jm,{disabled:e,error:n?.id||null,intlLabel:{id:(0,d.Z)("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:s,onChange:i,type:"text",value:m})));Ot.defaultProps={disabled:!1,error:null,header:null,isMain:!1,onChange(){},oneThatIsCreatingARelationWithAnother:null,target:null,value:""},Ot.propTypes={disabled:t().bool,error:t().object,header:t().string,isMain:t().bool,name:t().string.isRequired,onChange:t().func,oneThatIsCreatingARelationWithAnother:t().string,target:t().string,value:t().string};var Mn=Ot,qa=l(51382),En=l.n(qa),ka=l(24443),Lt=l.n(ka),$a=l(25449),Ua=l(10168),Ba=l(7733),ja=l(79634),Wa=l(26253),za=l(32548);const Va=(0,Ie.ZP)(W.x)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,Ga=(0,Ie.ZP)(W.x)`
  background: ${({theme:e,isSelected:n})=>e.colors[n?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:n})=>e.colors[n?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:n})=>e.colors[n?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,Ka=(0,Ie.ZP)($.k)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,wa={oneWay:$a.Z,oneToOne:Ua.Z,oneToMany:Ba.Z,manyToOne:ja.Z,manyToMany:Wa.Z,manyWay:za.Z},It=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:n,relationType:o,target:r})=>{const s=(0,ve.I0)(),{formatMessage:i}=(0,q.Z)(),{contentTypes:u,modifiedData:c}=(0,Ze.Z)(),m=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],g=["oneWay","manyWay"],p=(e==="contentType"?h()(c,[e,"schema","kind"],""):e)==="collectionType"?m:g,T=o==="manyToOne",v=h()(u,[r,"schema","displayName"],"unknown"),F=T?v:n,N=T?n:v,L=Lt()(F,o==="manyToMany"?2:1),E=h()(u,[r,"schema","restrictRelationsTo"],null),M=Lt()(N,["manyToMany","oneToMany","manyToOne","manyWay"].includes(o)?2:1);return o?a.createElement($.k,{style:{flex:1}},a.createElement(Va,null,a.createElement($.k,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center"},a.createElement(yt.k,{tagName:"button"},a.createElement($.k,{gap:3},p.map(A=>{const U=wa[A],V=E===null||E.includes(A);return a.createElement(Ga,{as:"button",isSelected:o===A,disabled:!V,key:A,onClick:()=>{V&&s({type:Q.QQ,target:{oneThatIsCreatingARelationWithAnother:n,targetContentType:r,value:A}})},padding:2,type:"button"},a.createElement(U,{key:A}))}))))),a.createElement(Ka,{justifyContent:"center"},a.createElement(X.Z,null,En()(L,{length:24}),"\xA0"),a.createElement(X.Z,{textColor:"primary600"},i({id:(0,d.Z)(`relation.${o}`)}),"\xA0"),a.createElement(X.Z,null,En()(M,{length:24})))):null};It.defaultProps={relationType:null,target:null},It.propTypes={naturePickerType:t().string.isRequired,oneThatIsCreatingARelationWithAnother:t().string.isRequired,relationType:t().string,target:t().string};var Ha=It;const Rn=({formErrors:e,mainBoxHeader:n,modifiedData:o,naturePickerType:r,onChange:s})=>{const i=(0,Ft.Z)(o.relation,o.targetAttribute);return a.createElement($.k,{style:{position:"relative"}},a.createElement(Mn,{isMain:!0,header:n,error:e?.name||null,name:"name",onChange:s,value:o?.name||""}),a.createElement(Ha,{naturePickerType:r,oneThatIsCreatingARelationWithAnother:n,relationType:i,target:o.target}),a.createElement(Mn,{disabled:["oneWay","manyWay"].includes(i),error:e?.targetAttribute||null,name:"targetAttribute",onChange:s,oneThatIsCreatingARelationWithAnother:n,target:o.target,value:o?.targetAttribute||""}))};Rn.propTypes={formErrors:t().object.isRequired,mainBoxHeader:t().string.isRequired,modifiedData:t().object.isRequired,naturePickerType:t().string.isRequired,onChange:t().func.isRequired};var Ya=Rn,Zn=l(45251);const Dt=({description:e,error:n,intlLabel:o,modifiedData:r,name:s,onChange:i,value:u})=>{const{formatMessage:c}=(0,q.Z)(),m=(0,a.useRef)(i),g=r?.displayName||"";(0,a.useEffect)(()=>{if(g){const v=(0,Zn.Z)(g);try{const F=Lt()(v,2);m.current({target:{name:s,value:F}})}catch{m.current({target:{name:s,value:v}})}}else m.current({target:{name:s,value:""}})},[g,s]);const f=n?c({id:n,defaultMessage:n}):"",p=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=c(o);return a.createElement(xt.o,{error:f,label:T,id:s,hint:p,name:s,onChange:i,value:u||""})};Dt.defaultProps={description:null,error:null,value:null},Dt.propTypes={description:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}),error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,modifiedData:t().object.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,value:t().string};var Qa=Dt,Xa=l(42623),Ja=l(90333);const Pt=({error:e,intlLabel:n,name:o,onChange:r,value:s})=>{const{formatMessage:i}=(0,q.Z)(),{allComponentsCategories:u}=(0,Ze.Z)(),[c,m]=(0,a.useState)(u),g=e?i({id:e,defaultMessage:e}):"",f=i(n),p=v=>{r({target:{name:o,value:v,type:"select-category"}})},T=v=>{m(F=>[...F,v]),p(v)};return a.createElement(Xa.X,{error:g,id:o,label:f,name:o,onChange:p,onCreateOption:T,value:s},c.map(v=>a.createElement(Ja.O,{key:v,value:v},v)))};Pt.defaultProps={error:null,value:null},Pt.propTypes={error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,name:t().string.isRequired,onChange:t().func.isRequired,value:t().string};var _a=Pt;const qt=({error:e,intlLabel:n,isAddingAComponentToAnotherComponent:o,isCreating:r,isCreatingComponentWhileAddingAField:s,componentToCreate:i,name:u,onChange:c,targetUid:m,forTarget:g,value:f})=>{const{formatMessage:p}=(0,q.Z)(),T=e?p({id:e,defaultMessage:e}):"",v=p(n),{componentsGroupedByCategory:F,componentsThatHaveOtherComponentInTheirAttributes:N}=(0,Ze.Z)(),L=["component","components"].includes(g);let E=Object.entries(F).reduce((M,A)=>{const[U,V]=A,J=V.map(ne=>({uid:ne.uid,label:ne.schema.displayName,categoryName:U}));return[...M,...J]},[]);return o&&(E=E.filter(M=>!N.includes(M.uid))),L&&(E=E.filter(M=>M.uid!==m)),s&&(E=[{uid:f,label:i.displayName,categoryName:i.category}]),a.createElement(nt.P,{disabled:s||!r,error:T,label:v,id:u,name:u,onChange:M=>{c({target:{name:u,value:M,type:"select-category"}})},value:f||""},E.map(M=>a.createElement(at.W,{key:M.uid,value:M.uid},`${M.categoryName} - ${M.label}`)))};qt.defaultProps={componentToCreate:null,error:null},qt.propTypes={componentToCreate:t().object,forTarget:t().string.isRequired,error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,isAddingAComponentToAnotherComponent:t().bool.isRequired,isCreating:t().bool.isRequired,isCreatingComponentWhileAddingAField:t().bool.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,targetUid:t().string.isRequired,value:t().string.isRequired};var eo=qt,kt=(e,n)=>e.find(({name:o})=>o===n);const An=({dynamicZoneTarget:e,intlLabel:n,name:o,onChange:r,value:s})=>{const{formatMessage:i}=(0,q.Z)(),{componentsGroupedByCategory:u,modifiedData:c}=(0,Ze.Z)(),g=(kt(c.contentType.schema.attributes,e)||{}).components||[],f=Object.keys(u).reduce((v,F)=>{const N=u[F].filter(({uid:L})=>!g.includes(L));return N.length>0&&(v[F]=N),v},{}),p=Object.entries(f).reduce((v,F)=>{const[N,L]=F,E={label:N,children:L.map(({uid:M,schema:{displayName:A}})=>({label:A,value:M}))};return v.push(E),v},[]),T=i({id:(0,d.Z)("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:s.length});return a.createElement(un.Q,{id:"select1",label:i(n),customizeContent:()=>T,name:o,onChange:v=>{r({target:{name:o,value:v,type:"select-components"}})},options:p,value:s||[]})};An.propTypes={intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,dynamicZoneTarget:t().string.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,value:t().array.isRequired};var to=An;const $t=({intlLabel:e,error:n,modifiedData:o,name:r,onChange:s,options:i,value:u})=>{const{formatMessage:c}=(0,q.Z)(),m=c(e),g=n?c({id:n,defaultMessage:n}):"",f=p=>{s({target:{name:r,value:p,type:"select"}}),u&&o.default!==void 0&&o.default!==null&&s({target:{name:"default",value:null}})};return a.createElement(nt.P,{error:g,label:m,id:r,name:r,onChange:f,value:u||""},i.map(({metadatas:{intlLabel:p,disabled:T,hidden:v},key:F,value:N})=>a.createElement(at.W,{key:F,value:N,disabled:T,hidden:v},c({id:p.id,defaultMessage:p.defaultMessage},p.values))))};$t.defaultProps={error:void 0,value:""},$t.propTypes={error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,modifiedData:t().object.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,options:t().arrayOf(t().shape({metadatas:t().shape({intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired}).isRequired,disabled:t().bool,hidden:t().bool}).isRequired,key:t().oneOfType([t().string,t().number]).isRequired,value:t().oneOfType([t().string,t().number]).isRequired}).isRequired).isRequired,value:t().string};var no=$t;const Ut=({intlLabel:e,error:n,modifiedData:o,name:r,onChange:s,options:i,value:u})=>{const{formatMessage:c}=(0,q.Z)(),m=c(e),g=n?c({id:n,defaultMessage:n}):"",f=p=>{s({target:{name:r,value:p,type:"select"}}),u&&(p==="biginteger"&&u!=="biginteger"&&(o.default!==void 0&&o.default!==null&&s({target:{name:"default",value:null}}),o.max!==void 0&&o.max!==null&&s({target:{name:"max",value:null}}),o.min!==void 0&&o.min!==null&&s({target:{name:"min",value:null}})),["decimal","float","integer"].includes(p)&&u==="biginteger"&&(o.default!==void 0&&o.default!==null&&s({target:{name:"default",value:null}}),o.max!==void 0&&o.max!==null&&s({target:{name:"max",value:null}}),o.min!==void 0&&o.min!==null&&s({target:{name:"min",value:null}})))};return a.createElement(nt.P,{error:g,label:m,id:r,name:r,onChange:f,value:u||""},i.map(({metadatas:{intlLabel:p,disabled:T,hidden:v},key:F,value:N})=>a.createElement(at.W,{key:F,value:N,disabled:T,hidden:v},c(p))))};Ut.defaultProps={error:void 0,value:""},Ut.propTypes={error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,modifiedData:t().object.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,options:t().arrayOf(t().shape({metadatas:t().shape({intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired}).isRequired,disabled:t().bool,hidden:t().bool}).isRequired,key:t().oneOfType([t().string,t().number]).isRequired,value:t().oneOfType([t().string,t().number]).isRequired}).isRequired).isRequired,value:t().string};var ao=Ut;const Bt=({description:e,error:n,intlLabel:o,modifiedData:r,name:s,onChange:i,value:u})=>{const{formatMessage:c}=(0,q.Z)(),m=(0,a.useRef)(i),g=r?.displayName||"";(0,a.useEffect)(()=>{g?m.current({target:{name:s,value:(0,Zn.Z)(g)}}):m.current({target:{name:s,value:""}})},[g,s]);const f=n?c({id:n,defaultMessage:n}):"",p=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=c(o);return a.createElement(xt.o,{error:f,label:T,id:s,hint:p,name:s,onChange:i,value:u||""})};Bt.defaultProps={description:null,error:null,value:null},Bt.propTypes={description:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}),error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,modifiedData:t().object.isRequired,name:t().string.isRequired,onChange:t().func.isRequired,value:t().string};var oo=Bt;const xn=({form:e,formErrors:n,genericInputProps:o,modifiedData:r,onChange:s})=>{const{formatMessage:i}=(0,q.Z)();return e.map((u,c)=>u.items.length===0?null:a.createElement(W.x,{key:c},u.sectionTitle&&a.createElement(W.x,{paddingBottom:4},a.createElement(X.Z,{variant:"delta",as:"h3"},i(u.sectionTitle))),a.createElement(bt.r,{gap:4},u.items.map((m,g)=>{const f=`${c}.${g}`,p=h()(r,m.name,""),T=Object.keys(n).find(F=>F===m.name),v=T?n[T].id:h()(n,[...m.name.split(".").filter(F=>F!=="componentToCreate"),"id"],null);return m.type==="pushRight"?a.createElement(et.P,{col:m.size||6,key:m.name||f},a.createElement("div",null)):a.createElement(et.P,{col:m.size||6,key:m.name||f},a.createElement(C.jm,{...m,...o,error:v,onChange:s,value:p}))}))))};xn.propTypes={form:t().arrayOf(t().object).isRequired,formErrors:t().object.isRequired,genericInputProps:t().object.isRequired,modifiedData:t().object.isRequired,onChange:t().func.isRequired};var Sn=xn,so=l(10508);const jt=({description:e,disabled:n,error:o,intlLabel:r,labelAction:s,name:i,onChange:u,placeholder:c,value:m})=>{const{formatMessage:g}=(0,q.Z)(),f=o?g({id:o,defaultMessage:o}):"",p=e?g({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=g(r),v=c?g({id:c.id,defaultMessage:c.defaultMessage},{...c.values}):"",F=Array.isArray(m)?m.join(`
`):"",N=L=>{const E=L.target.value.split(`
`);u({target:{name:i,value:E}})};return a.createElement(so.g,{disabled:n,error:f,label:T,labelAction:s,id:i,hint:p,name:i,onChange:N,placeholder:v,value:F},F)};jt.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,value:""},jt.propTypes={description:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}),disabled:t().bool,error:t().string,intlLabel:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}).isRequired,labelAction:t().element,name:t().string.isRequired,onChange:t().func.isRequired,placeholder:t().shape({id:t().string.isRequired,defaultMessage:t().string.isRequired,values:t().object}),value:t().oneOfType([t().array,t().string])};var ro=jt,io=(e,n)=>{const o=h()(e,["contentType","schema","kind"],"");return o==="singleType"||o===n.kind?!0:h()(e,["contentType","schema","attributes"],[]).filter(({relation:i,type:u,targetAttribute:c})=>{const m=(0,Ft.Z)(i,c);return u==="relation"&&!["oneWay","manyWay"].includes(m)}).length===0},lo=(e="",n,o)=>{const r=["text","email","richtext","password","number","enumeration","date","media","boolean","json","relation"],s=e==="contentType",i=o.includes(n),u=!s&&!i;return s?[[...r,"uid"],["component","dynamiczone"]]:u?[r,["component"]]:[r]},Fn=e=>e.reduce((n,o)=>{const r=o.items.reduce((s,i)=>(i.name&&s.push(i.name),s),[]);return[...n,...r]},[]),b=l(24346),De=l(2158),uo={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,d.Z)("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},Nn=/^[A-Za-z][-_0-9A-Za-z]*$/,co=e=>{const n={name:b.Z_().matches(Nn,C.I0.regex).test({name:"nameNotAllowed",message:C.I0.unique,test(o){return o?!e.includes(o?.toLowerCase()):!1}}).required(C.I0.required)};return b.Ry(n)},mo=(e,n,o)=>{const r={displayName:b.Z_().test({name:"nameAlreadyUsed",message:C.I0.unique,test(s){if(!s)return!1;const i=(0,De.N)(s,o);return!e.includes(i)}}).test({name:"nameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(s){return s?!n.includes(s?.trim()?.toLowerCase()):!1}}).required(C.I0.required),category:b.Z_().matches(Nn,C.I0.regex).required(C.I0.required),icon:b.Z_()};return b.Ry(r)},Wt={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:(0,d.Z)("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:(0,d.Z)("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:(0,d.Z)("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},Pe={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:(0,d.Z)("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:(0,d.Z)("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]}]},advanced(){return[]}},Z={default:{name:"default",type:"text",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:(0,d.Z)("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:(0,d.Z)("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:(0,d.Z)("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:(0,d.Z)("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:(0,d.Z)("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},po={boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.private]}]}},component({repeatable:e},n){return n==="1"?{sections:Pe.advanced("componentToCreate")}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.private,Z.max,Z.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...Z.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.unique,Z.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.max,Z.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...Z.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.unique,Z.maxLength,Z.minLength,Z.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((n,o)=>e.enum.indexOf(n)===o&&n).map(n=>({key:n,value:n,metadatas:{intlLabel:{id:`${n}.no-override`,defaultMessage:n}}}))]},{intlLabel:{id:(0,d.Z)("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:(0,d.Z)("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:(0,d.Z)("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.private]}]}},number(e){const n=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:n,intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.unique,Z.max,Z.min,Z.private]}]}},password(){return{sections:[{sectionTitle:null,items:[Z.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.maxLength,Z.minLength,Z.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[Z.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.maxLength,Z.minLength,Z.private]}]}},text(){return{sections:[{sectionTitle:null,items:[Z.default,Z.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.unique,Z.maxLength,Z.minLength,Z.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...Z.default,disabled:Boolean(e.targetField),type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[Z.required,Z.maxLength,Z.minLength,Z.private]}]}}};const fe={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,d.Z)("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}};var go={component(e,n){if(n==="1"){const o=e.createComponent===!0?Pe.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[Wt]},...o]}}return{sections:[{sectionTitle:null,items:[fe,{name:"component",type:"select-component",intlLabel:{id:(0,d.Z)("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:(0,d.Z)("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:(0,d.Z)("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:(0,d.Z)("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[fe,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[fe]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:(0,d.Z)("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:(0,d.Z)("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[fe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:(0,d.Z)("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:(0,d.Z)("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:(0,d.Z)("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[fe,{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[fe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,d.Z)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,d.Z)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,d.Z)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[fe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,d.Z)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,d.Z)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,d.Z)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,n,o){const r=o.filter(({type:s})=>["string","text"].includes(s)).map(({name:s})=>({key:s,value:s,metadatas:{intlLabel:{id:`${s}.no-override`,defaultMessage:s}}}));return{sections:[{sectionTitle:null,items:[{...fe,placeholder:{id:(0,d.Z)("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. Slug, SEO URL, Canonical URL"}},{intlLabel:{id:(0,d.Z)("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...r]}]}]}}},On={advanced:po,base:go},fo={sections:[{sectionTitle:null,items:[fe]}]},yo=l(91815),bo=l.n(yo),ho=l(40791),vo=l.n(ho),zt=e=>vo()(e,{decamelize:!1,lowercase:!1,separator:"_"}),To=l(78746),Vt=l.n(To);const Ln=/^[A-Za-z][_0-9A-Za-z]*$/,In=e=>({name:"attributeNameAlreadyUsed",message:C.I0.unique,test(n){return n?!e.includes(n):!1}}),Ys=(e,n,o)=>{const r=e?.schema?.attributes??{};return Object.keys(r).filter(s=>n?s!==o:!0)},Gt=e=>({name:"forbiddenAttributeName",message:(0,d.Z)("error.attributeName.reserved-name"),test(n){return n?!e.includes(n):!1}}),y={default:()=>b.Z_().nullable(),max:()=>b.Rx().integer().nullable(),min:()=>b.Rx().integer().when("max",(e,n)=>e?n.max(e,(0,d.Z)("error.validation.minSupMax")):n).nullable(),maxLength:()=>b.Rx().integer().positive((0,d.Z)("error.validation.positive")).nullable(),minLength:()=>b.Rx().integer().min(0).when("maxLength",(e,n)=>e?n.max(e,(0,d.Z)("error.validation.minSupMax")):n).nullable(),name(e,n){return b.Z_().test(In(e)).test(Gt(n)).matches(Ln,C.I0.regex).required(C.I0.required)},required:()=>b.O7(),type:()=>b.Z_().required(C.I0.required),unique:()=>b.O7().nullable()},Kt=(e,n)=>({name:y.name(e,n),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength(),regex:b.Z_().test({name:"isValidRegExpPattern",message:(0,d.Z)("error.validation.regex"),test(r){return new RegExp(r)!==null}}).nullable()}),wt={name:"isMinSuperiorThanMax",message:(0,d.Z)("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:n}=this.parent;return!n||Number.isNaN(Vt()(e))?!0:Vt()(n)>=Vt()(e)}};var Ht={date(e,n){const o={name:y.name(e,n),type:y.type()};return b.Ry(o)},datetime(e,n){const o={name:y.name(e,n),type:y.type()};return b.Ry(o)},time(e,n){const o={name:y.name(e,n),type:y.type()};return b.Ry(o)},default(e,n){const o={name:y.name(e,n),type:y.type()};return b.Ry(o)},biginteger(e,n){const o={name:y.name(e,n),type:y.type(),default:b.Z_().nullable().matches(/^-?\d*$/),unique:y.unique(),required:y.required(),max:b.Z_().nullable().matches(/^-?\d*$/,C.I0.regex),min:b.Z_().nullable().test(wt).matches(/^-?\d*$/,C.I0.regex)};return b.Ry(o)},boolean(e,n){const o={name:y.name(e,n),default:b.O7().nullable(),required:y.required(),unique:y.unique()};return b.Ry(o)},component(e,n){const o={name:y.name(e,n),type:y.type(),required:y.required(),max:y.max(),min:y.min(),component:b.Z_().required(C.I0.required)};return b.Ry(o)},decimal(e,n){const o={name:y.name(e,n),type:y.type(),default:b.Rx(),required:y.required(),max:b.Rx(),min:b.Rx().test(wt)};return b.Ry(o)},dynamiczone(e,n){const o={name:y.name(e,n),type:y.type(),required:y.required(),max:y.max(),min:y.min()};return b.Ry(o)},email(e,n){const o={name:y.name(e,n),type:y.type(),default:b.Z_().email().nullable(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return b.Ry(o)},enumeration(e,n){const o=/^[_A-Za-z][_0-9A-Za-z]*$/,r={name:b.Z_().test(In(e)).test(Gt(n)).matches(o,C.I0.regex).required(C.I0.required),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),enum:b.IX().of(b.Z_()).min(1,C.I0.min).test({name:"areEnumValuesUnique",message:(0,d.Z)("error.validation.enum-duplicate"),test(s){return!bo()(s.map(zt).filter((u,c,m)=>m.indexOf(u)!==c)).length}}).test({name:"doesNotHaveEmptyValues",message:(0,d.Z)("error.validation.enum-empty-string"),test:s=>!s.map(zt).some(i=>i==="")}).test({name:"doesMatchRegex",message:(0,d.Z)("error.validation.enum-regex"),test:s=>s.map(zt).every(i=>o.test(i))}),enumName:b.Z_().nullable()};return b.Ry(r)},float(e,n){const o={name:y.name(e,n),type:y.type(),required:y.required(),default:b.Rx(),max:b.Rx(),min:b.Rx().test(wt)};return b.Ry(o)},integer(e,n){const o={name:y.name(e,n),type:y.type(),default:b.Rx().integer(),unique:y.unique(),required:y.required(),max:y.max(),min:y.min()};return b.Ry(o)},json(e,n){const o={name:y.name(e,n),type:y.type(),required:y.required(),unique:y.unique()};return b.Ry(o)},media(e,n){const o={name:y.name(e,n),type:y.type(),multiple:b.O7(),required:y.required(),allowedTypes:b.IX().of(b.Z_().oneOf(["images","videos","files","audios"])).min(1).nullable()};return b.Ry(o)},password(e,n){const o={name:y.name(e,n),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return b.Ry(o)},relation(e,n,o,{initialData:r,modifiedData:s}){const i={name:y.name(e,n),target:b.Z_().required(C.I0.required),relation:b.Z_().required(),type:b.Z_().required(),targetAttribute:b.Vo(()=>{const u=(0,Ft.Z)(s.relation,s.targetAttribute);if(u==="oneWay"||u==="manyWay")return b.Z_().nullable();let c=b.Z_().test(Gt(n)),g=[...o.map(({name:f})=>f),s.name].filter(f=>f!==r.targetAttribute);return c.matches(Ln,C.I0.regex).test({name:"forbiddenTargetAttributeName",message:(0,d.Z)("error.validation.relation.targetAttribute-taken"),test(f){return f?!g.includes(f):!1}}).required(C.I0.required)})};return b.Ry(i)},richtext(e,n){const o={name:y.name(e,n),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return b.Ry(o)},string(e,n){const o=Kt(e,n);return b.Ry(o)},text(e,n){const o=Kt(e,n);return b.Ry(o)},uid(e,n){const o=Kt(e,n);return b.Ry(o)}};const Dn={name:"displayName",type:"text",intlLabel:{id:(0,d.Z)("contentType.displayName.label"),defaultMessage:"Display name"}};var Yt={advanced:{default(){return{sections:[{items:[{intlLabel:{id:(0,d.Z)("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:(0,d.Z)("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[Dn,{description:{id:(0,d.Z)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,d.Z)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:(0,d.Z)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,d.Z)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[Dn,{disabled:!0,description:{id:(0,d.Z)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,d.Z)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:(0,d.Z)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,d.Z)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:(0,d.Z)("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:(0,d.Z)("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:(0,d.Z)("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},Co=({usedContentTypeNames:e=[],reservedModels:n=[],singularNames:o=[],pluralNames:r=[]})=>{const s={displayName:b.Z_().test({name:"nameAlreadyUsed",message:C.I0.unique,test(i){if(!i)return!1;const u=(0,De.E)(i);return!e.includes(u)}}).test({name:"nameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!n.includes(i?.trim()?.toLowerCase()):!1}}).required(C.I0.required),pluralName:b.Z_().test({name:"pluralNameAlreadyUsed",message:C.I0.unique,test(i){return i?!r.includes(i):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,d.Z)("error.contentType.pluralName-used"),test(i,u){return i?u.parent.singularName!==i:!1}}).test({name:"pluralNameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!n.includes(i?.trim()?.toLowerCase()):!1}}).required(C.I0.required),singularName:b.Z_().test({name:"singularNameAlreadyUsed",message:C.I0.unique,test(i){return i?!o.includes(i):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,d.Z)("error.contentType.singularName-used"),test(i,u){return i?u.parent.pluralName!==i:!1}}).test({name:"singularNameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!n.includes(i?.trim()?.toLowerCase()):!1}}).required(C.I0.required),draftAndPublish:b.O7(),kind:b.Z_().oneOf(["singleType","collectionType"])};return b.Ry(s)},Qt={advanced:{default(){return{sections:Pe.advanced("componentToCreate.")}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[Wt]},...Pe.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[Wt]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:(0,d.Z)("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},Pn=(e,n)=>{e.forEach(o=>{if(!("sectionTitle"in o)){n[0].items.push(o);return}n.push(o)})},qn=(e,n)=>e.filter(({name:o})=>o!==n.initialData.name).map(({name:o})=>o),Ae={customField:{schema({schemaAttributes:e,attributeType:n,customFieldValidator:o,reservedNames:r,schemaData:s,ctbFormsAPI:i}){const u=qn(e,s),c=Ht[n](u,r.attributes);return i.makeCustomFieldValidator(c,o,u,r.attributes,s)},form:{base({customField:e}){const n=[{sectionTitle:null,items:[fe]}];return e.options?.base&&Pn(e.options.base,n),{sections:n}},advanced({customField:e,data:n,step:o,extensions:r,...s}){const i=[{sectionTitle:null,items:[]}],u=r.getAdvancedForm(["attribute",e.type],{data:n,type:e.type,step:o,...s});if(e.options?.advanced&&Pn(e.options.advanced,i),u){const c={sectionTitle:{id:(0,d.Z)("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:u};i.push(c)}return{sections:i}}}},attribute:{schema(e,n,o,r,s,i){const u=h()(e,["schema","attributes"],[]),c=qn(u,s);try{let m=Ht[n](c,o.attributes,r,s);return i.makeValidator(["attribute",n],m,c,o.attributes,r,s)}catch(m){return console.error("Error yup build schema",m),Ht.default(c,o.attributes)}},form:{advanced({data:e,type:n,step:o,extensions:r,...s}){try{const i=On.advanced[n](e,o).sections,u=r.getAdvancedForm(["attribute",n],{data:e,type:n,step:o,...s});return{sections:i.reduce((m,g)=>(g.sectionTitle===null?m.push(g):m.push({...g,items:[...g.items,...u]}),m),[])}}catch(i){return console.error(i),{sections:[]}}},base({data:e,type:n,step:o,attributes:r}){try{return On.base[n](e,o,r)}catch{return fo}}}},contentType:{schema(e,n,o,r,s,i){const u=Object.values(i).map(T=>T.schema.singularName),c=Object.values(i).map(T=>h()(T,["schema","pluralName"],"")),m=n?e.filter(T=>T!==o):e,g=n?u.filter(T=>h()(i,[o,"schema","singularName"],"")!==T):u,f=n?c.filter(T=>h()(i,[o,"schema","pluralName"],"")!==T):c,p=Co({usedContentTypeNames:m,reservedModels:r.models,singularNames:g,pluralNames:f});return s.makeValidator(["contentType"],p,m,r.models,g,f)},form:{base({actionType:e}){return e==="create"?Yt.base.create():Yt.base.edit()},advanced({extensions:e}){const n=Yt.advanced.default().sections.map(r=>r.items).flat(),o=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...n,...o]}]}}}},component:{schema(e,n,o,r=!1,s=null){const i=r?e.filter(u=>u!==s):e;return mo(i,o.models,n)},form:{advanced(){return{sections:Pe.advanced()}},base(){return{sections:Pe.base()}}}},addComponentToDynamicZone:{form:{advanced(){return Qt.advanced.default()},base({data:e}){return h()(e,"createComponent",!1)?Qt.base.createComponent():Qt.base.default()}}},editCategory:{schema(e,n){const o=e.filter(r=>r!==n.name).map(r=>We()(r));return co(o)},form:{advanced:()=>({sections:[]}),base(){return uo.base}}}},kn=l(98178),Mo=l(25061);const Eo=()=>e=>e[`${z.Z}_formModal`]||Mo.E;var Ro=()=>(0,kn.P1)(Eo(),e=>e),Zo=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:n,onNavigateToAddCompoToDZModal:o,onNavigateToCreateComponentStep2:r,actionType:s,attributeName:i,attributeType:u,customFieldUid:c,categoryName:m,dynamicZoneTarget:g,forTarget:f,modalType:p,isOpen:T,kind:v,step:F,targetUid:N}=(0,Te.Z)(),L=(0,C.mZ)().get(c),E=(0,a.useRef)(),M=(0,a.useMemo)(Ro,[]),A=(0,ve.I0)(),U=(0,C.lm)(),V=(0,ve.v9)(P=>M(P),ve.wU),{push:J}=(0,j.k6)(),{trackUsage:ne}=(0,C.rS)(),{formatMessage:I}=(0,q.Z)(),{getPlugin:ge}=(0,C.j1)(),G=ge(z.Z).apis.forms,ye=G.components.inputs,{addAttribute:K,addCustomFieldAttribute:qe,addCreatedComponentToDynamicZone:te,allComponentsCategories:B,changeDynamicZoneComponents:R,contentTypes:ke,components:Ke,createSchema:$e,deleteCategory:Jt,deleteData:st,editCategory:_t,editCustomFieldAttribute:en,submitData:tn,modifiedData:ae,nestedComponents:nn,setModifiedData:an,sortedContentTypesList:on,updateSchema:sn,reservedNames:Me}=(0,Ze.Z)(),{componentToCreate:we,formErrors:Ee,initialData:re,isCreatingComponentWhileAddingAField:xe,modifiedData:O}=V,x=f==="contentType"||f==="component"?[f]:[f,N];(0,a.useEffect)(()=>{if(T){const P=on.filter(dn);p==="editCategory"&&an(),s==="edit"&&p==="attribute"&&f==="contentType"&&ne("willEditFieldOfContentType");const ue=[...x,"schema","attributes"],me=kt(h()(ae,ue,[]),g)||null;if(p==="editCategory"&&s==="edit"&&A({type:Q._H,modalType:p,actionType:s,data:{name:m}}),p==="contentType"&&s==="create"&&A({type:Q._H,modalType:p,actionType:s,data:{draftAndPublish:!0},pluginOptions:{}}),p==="contentType"&&s==="edit"){const{displayName:k,draftAndPublish:_,kind:pe,pluginOptions:oe,pluralName:Zs,singularName:As}=h()(ae,[...x,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});A({type:Q._H,actionType:s,modalType:p,data:{displayName:k,draftAndPublish:_,kind:pe,pluginOptions:oe,pluralName:Zs,singularName:As}})}if(p==="component"&&s==="edit"){const k=h()(ae,x,{});A({type:Q._H,actionType:s,modalType:p,data:{displayName:k.schema.displayName,category:k.category}})}if(p==="addComponentToDynamicZone"&&s==="edit"){const k={...me,components:[],name:g,createComponent:!1,componentToCreate:{type:"component"}};A({type:Q.VZ,attributeToEdit:k})}if(u){const _={...kt(h()(ae,ue,[]),i),name:i};u==="component"&&s==="edit"&&(_.repeatable||Qe()(_,"repeatable",!1)),A(p==="customField"?{type:Q.OY,customField:L,isEditing:s==="edit",modifiedDataToSetForEditing:_,forTarget:f}:{type:Q.S0,attributeType:u,nameToSetForRelation:h()(P,["0","title"],"error"),targetUid:h()(P,["0","uid"],"error"),isEditing:s==="edit",modifiedDataToSetForEditing:_,step:F,forTarget:f})}}else A({type:Q.c2})},[s,i,u,m,g,f,T,p]);const S=p==="contentType",D=p==="component",H=p==="attribute",ie=p==="customField",le=u==="component"&&H,de=s==="create",be=h()(O,"createComponent",!1)||xe,Ue=F==="1",Xn=p==="editCategory",Jn=p==="chooseAttribute",rn=(0,De.E)(O.displayName||""),ln=h()(ae,[...x,"schema","attributes"],null),cs=async()=>{let P;const ue=be&&F==="1"?h()(O,"componentToCreate",{}):O;if(S)P=Ae.contentType.schema(Object.keys(ke),s==="edit",h()(ae,[...x,"uid"],null),Me,G,ke);else if(D)P=Ae.component.schema(Object.keys(Ke),O.category||"",Me,s==="edit",h()(ae,[...x,"uid"],null),G);else if(ie)P=Ae.customField.schema({schemaAttributes:h()(ae,[...x,"schema","attributes"],[]),attributeType:L.type,reservedNames:Me,schemaData:{modifiedData:O,initialData:re},ctbFormsAPI:G,customFieldValidator:L.options?.validator});else if(le&&be&&Ue)P=Ae.component.schema(Object.keys(Ke),h()(O,"componentToCreate.category",""),Me,G);else if(H&&!Ue){const me=u==="relation"?"relation":O.type;let k=[];if(me==="relation"){const _=h()(O,["target"],null);k=h()(ke,[_,"schema","attributes"],[]).filter(({name:oe})=>s!=="edit"?!0:oe!==re.targetAttribute)}P=Ae.attribute.schema(h()(ae,x,{}),me,Me,k,{modifiedData:O,initialData:re},G)}else if(Xn)P=Ae.editCategory.schema(B,re,G);else if(Ue&&be)P=Ae.component.schema(Object.keys(Ke),h()(O,"componentToCreate.category",""),Me,G);else return;await P.validate(ue,{abortEarly:!1})},_n=(0,a.useCallback)(({target:{name:P,value:ue,type:me,...k}})=>{const _=["enumName","max","min","maxLength","minLength","regex","default"];let pe;_.includes(P)&&ue===""?pe=null:pe=ue;const oe=Object.assign({},Ee);P==="max"&&delete oe.min,P==="maxLength"&&delete oe.minLength,delete oe[P],A({type:Q.Ey,errors:oe}),A({type:Q.P0,keys:P.split("."),value:pe,...k})},[A,Ee]),ce=async(P,ue=de)=>{P.preventDefault();try{await cs(),gs(ue);const me=f==="components"?N:rn;if(S)if(de)$e({...O,kind:v},p,rn),J({pathname:`/plugins/${z.Z}/content-types/${rn}`}),n({forTarget:f,targetUid:me});else{io(ae,O)?(e(),tn(O)):U({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(p==="component")if(de){const k=(0,De.N)(O.displayName,O.category),{category:_,...pe}=O;$e(pe,"component",k,_),J({pathname:`/plugins/${z.Z}/component-categories/${_}/${k}`}),n({forTarget:f,targetUid:k})}else{sn(O,p,N),e();return}else if(Xn){if(We()(re.name)===We()(O.name)){e();return}_t(re.name,O);return}else if(ie){const k={attributeToSet:{...O,customField:c},forTarget:f,targetUid:N,initialAttribute:re};s==="edit"?en(k):qe(k),ue?n({forTarget:f,targetUid:me}):e();return}else if(H&&!be){if(u==="dynamiczone"){K(O,f,N,s==="edit",re),de?(A({type:Q.I}),E.current._handlers.setSelectedTabIndex(0),o({dynamicZoneTarget:O.name})):e();return}if(!le){K(O,f,N,s==="edit",re),ue?n({forTarget:f,targetUid:me}):e();return}if(Ue){r(),A({type:Q.yC,forTarget:f});return}K(O,f,N,s==="edit",re,!0),ue?n({forTarget:f,targetUid:N}):e()}else if(H&&be){if(Ue){ne("willCreateComponentFromAttributesModal"),A({type:Q.oF,forTarget:f}),r();return}const{category:k,type:_,...pe}=we,oe=(0,De.N)(we.displayName,k);$e(pe,_,oe,k,be),K(O,f,N,!1),A({type:Q.c2}),ue?n({forTarget:"components",targetUid:oe}):e();return}else{if(Ue)if(be){const{category:k,type:_,...pe}=O.componentToCreate,oe=(0,De.N)(O.componentToCreate.displayName,k);$e(pe,_,oe,k,be),te(g,[oe]),n({forTarget:"components",targetUid:oe})}else R(g,O.components),e();else console.error("This case is not handled");return}A({type:Q.c2})}catch(me){const k=(0,C.CJ)(me);console.log({err:me,errors:k}),A({type:Q.Ey,errors:k})}},ms=()=>{window.confirm(I({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),A({type:Q.c2}))},ea=()=>{gt()(O,re)?(e(),A({type:Q.c2})):ms()},ps=P=>{if(P==="advanced"){if(S){ne("didSelectContentTypeSettings");return}f==="contentType"&&ne("didSelectContentTypeFieldSettings")}},gs=P=>{p==="attribute"&&f==="contentType"&&u!=="dynamiczone"&&P&&ne("willAddMoreFieldToContentType")},fs=()=>!!(p==="editCategory"||p==="component"||Je()(O,"createComponent")),ys=lo(f,N,nn);if(!T||!p)return null;const ta=h()(Ae,[p,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),bs=f==="components"||f==="component",na={customInputs:{"allowed-types-select":ua,"boolean-radio-group":Oa,"checkbox-with-number-field":Ia,"content-type-radio-group":Da,"radio-group":At,relation:Ya,"select-category":_a,"select-component":eo,"select-components":to,"select-default-boolean":Sa,"select-number":ao,"select-date":no,"toggle-draft-publish":Ea,"text-plural":Qa,"text-singular":oo,"textarea-enum":ro,...ye},componentToCreate:we,dynamicZoneTarget:g,formErrors:Ee,isAddingAComponentToAnotherComponent:bs,isCreatingComponentWhileAddingAField:xe,mainBoxHeader:h()(ae,[...x,"schema","displayName"],""),modifiedData:O,naturePickerType:f,isCreating:de,targetUid:N,forTarget:f},aa=ta.advanced({data:O,type:u,step:F,actionType:s,attributes:ln,extensions:G,forTarget:f,contentTypeSchema:ae.contentType||{},customField:L}).sections,oa=ta.base({data:O,type:u,step:F,actionType:s,attributes:ln,extensions:G,forTarget:f,contentTypeSchema:ae.contentType||{},customField:L}).sections,hs=Fn(oa),vs=Fn(aa),Ts=Object.keys(Ee).some(P=>hs.includes(P)),Cs=Object.keys(Ee).some(P=>vs.includes(P)),Ms=h()(ke,[N,"schema","kind"]),Es=()=>s==="edit"&&ln.every(({name:P})=>P!==O?.name),Rs=()=>{Es()&&ne("didEditFieldNameOnContentType")};return a.createElement(mt.P,{onClose:ea,labelledBy:"title"},a.createElement(Ra,{actionType:s,attributeName:i,categoryName:m,contentTypeKind:v,dynamicZoneTarget:g,modalType:p,forTarget:f,targetUid:N,attributeType:u,customFieldUid:c}),Jn&&a.createElement(Ma,{attributes:ys,forTarget:f,kind:Ms||"collectionType"}),!Jn&&a.createElement("form",{onSubmit:ce},a.createElement(ze.f,null,a.createElement(Ve.v,{label:"todo",id:"tabs",variant:"simple",ref:E,onTabChange:P=>{P===1&&ps("advanced")}},a.createElement($.k,{justifyContent:"space-between"},a.createElement(xa,{actionType:s,forTarget:f,kind:v,step:F,modalType:p,attributeType:u,attributeName:i,customField:L}),a.createElement(Oe.m,null,a.createElement(Oe.O,{hasError:Ts},I({id:(0,d.Z)("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})),a.createElement(Oe.O,{hasError:Cs,disabled:fs()},I({id:(0,d.Z)("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})))),a.createElement(pt.i,null),a.createElement(W.x,{paddingTop:6},a.createElement(Le.n,null,a.createElement(Le.x,null,a.createElement($.k,{direction:"column",alignItems:"stretch",gap:6},a.createElement(Sn,{form:oa,formErrors:Ee,genericInputProps:na,modifiedData:O,onChange:_n}))),a.createElement(Le.x,null,a.createElement($.k,{direction:"column",alignItems:"stretch",gap:6},a.createElement(Sn,{form:aa,formErrors:Ee,genericInputProps:na,modifiedData:O,onChange:_n}))))))),a.createElement(sa.m,{endActions:a.createElement(Za,{deleteCategory:Jt,deleteContentType:st,deleteComponent:st,categoryName:re.name,isAttributeModal:p==="attribute",isCustomFieldModal:p==="customField",isComponentToDzModal:p==="addComponentToDynamicZone",isComponentAttribute:u==="component",isComponentModal:p==="component",isContentTypeModal:p==="contentType",isCreatingComponent:s==="create",isCreatingDz:s==="create",isCreatingComponentAttribute:O.createComponent||!1,isCreatingComponentInDz:O.createComponent||!1,isCreatingComponentWhileAddingAField:xe,isCreatingContentType:s==="create",isEditingAttribute:s==="edit",isDzAttribute:u==="dynamiczone",isEditingCategory:p==="editCategory",isInFirstComponentStep:F==="1",onSubmitAddComponentAttribute:ce,onSubmitAddComponentToDz:ce,onSubmitCreateComponent:ce,onSubmitCreateContentType:ce,onSubmitCreateDz:ce,onSubmitEditAttribute:ce,onSubmitEditCategory:ce,onSubmitEditComponent:ce,onSubmitEditContentType:ce,onSubmitEditCustomFieldAttribute:ce,onSubmitEditDz:ce,onClickFinish:Rs}),startActions:a.createElement(Y.z,{variant:"tertiary",onClick:ea},I({id:"app.components.Button.cancel",defaultMessage:"Cancel"}))})))},$n=e=>e.reduce((n,o)=>(n[o.uid]=o,n),{}),Ao=(e,n,o,r)=>{const s=n.reduce((c,m)=>{const g=h()(o,m,{});return c[m]=g,c},{});return{[r?"contentType":"component"]:e,components:s}},xo=(e,n)=>{const o=Object.keys(e).map(r=>h()(e,[r,...n],""));return(0,Re.Z)(o)},So=l(13339);const Fo=e=>{const n=Object.keys(e).reduce((o,r)=>{const s=e?.[r]?.schema?.attributes??[],i=No(s);return[...o,...i]},[]);return(0,Re.Z)(n)},No=e=>e.reduce((n,o)=>{const{type:r,component:s}=o;return r==="component"&&n.push(s),n},[]);var Un=Fo;const Oo=e=>{const n=Object.keys(e).reduce((o,r)=>{const s=h()(e,[r],{}),i=s.uid;return Lo(s)&&o.push(i),o},[]);return(0,Re.Z)(n)},Lo=e=>h()(e,["schema","attributes"],[]).some(o=>{const{type:r}=o;return r==="component"});var Io=l(9086),Bn=l.n(Io),Do=l(98978),Po=l.n(Do),qo=l(39935),ko=l.n(qo);const $o=(e,n)=>{const o=Object.keys(e).filter(r=>{const s=h()(e,r,{}),i=h()(n,r,{}),u=h()(s,["isTemporary"],!1),c=!gt()(s,i);return u||c});return(0,Re.Z)(o)},Uo=(e,n)=>{const o=Wn(h()(e,"schema.attributes",[]),n),r=h()(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},r,{category:e.category},Bn()(e.schema,"attributes"),{attributes:o})},jn=(e,n=!1)=>{const o=h()(e,"uid",null),r=Wn(h()(e,"schema.attributes",[]),o),s=n?{category:h()(e,"category","")}:{},i=Object.assign(s,Bn()(e.schema,"attributes"),{attributes:r});return delete i.uid,delete i.isTemporary,delete i.visible,delete i.restrictRelationsTo,i},Wn=(e,n)=>e.reduce((o,{name:r,...s})=>{const i=s,u=i.target===n,c=i.type==="relation",m=h()(i,"targetAttribute",null);if(!u)if(c){const g=Object.assign({},i,{targetAttribute:zn(m)});o[r]=ot(g)}else o[r]=ot(i);if(u){const g=i.target,f=Object.assign({},i,{target:g,targetAttribute:zn(m)});o[r]=ot(f)}if(i.customField){const g={...i,type:"customField"};o[r]=ot(g)}return o},{}),zn=e=>e==="-"?null:e,ot=e=>Object.keys(e).reduce((n,o)=>(e[o]!==null&&o!=="plugin"&&(n[o]=e[o]),n),{}),Bo=(e,n,o,r=!1)=>$o(e,n).map(u=>{const c=h()(e,u,{});return Uo(c,o,r)}),jo=e=>Po()(Object.keys(e).map(n=>({visible:e[n].schema.visible,name:n,title:e[n].schema.displayName,plugin:e[n].plugin||null,uid:n,to:`/plugins/${z.Z}/content-types/${n}`,kind:e[n].schema.kind,restrictRelationsTo:e[n].schema.restrictRelationsTo})).filter(n=>n!==null),n=>ko()(n.title)),Vn="did-not-kill-server",Wo="server is down";function Ge(e,n){return new Promise(o=>{fetch(`${strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":!1}}).then(r=>{if(r.status>=400)throw new Error(Wo);if(!n)throw new Error(Vn);o(e)}).catch(r=>{setTimeout(()=>Ge(e,r.message!==Vn).then(o),100)})})}var zo=e=>Object.values(e.attributes).filter(({type:o})=>o==="dynamiczone").every(({components:o})=>Array.isArray(o)&&o.length>0),ee=l(31947),Vo=l(54370);const Go=()=>e=>e[`${z.Z}_dataManagerProvider`]||Vo.E;var Ko=()=>(0,kn.P1)(Go(),e=>e);const wo=e=>Object.keys(e).reduce((n,o)=>{const r=e[o].schema;return n[o]={...e[o],schema:{...r,attributes:Ho(r.attributes)}},n},{}),Ho=e=>Object.keys(e).reduce((n,o)=>(n.push({...e[o],name:o}),n),[]);var Gn=wo;const Xt=({children:e,components:n,contentTypes:o,isLoading:r,isLoadingForDataToBeSet:s,initialData:i,modifiedData:u,reservedNames:c})=>{const m=(0,ve.I0)(),g=(0,C.lm)(),{lockAppWithAutoreload:f,unlockAppWithAutoreload:p}=(0,C.Vu)(),{setCurrentStep:T}=(0,C.c1)(),{getPlugin:v}=(0,C.j1)(),{apis:F}=v(z.Z),{autoReload:N}=(0,C.QI)(),{formatMessage:L}=(0,q.Z)(),{trackUsage:E}=(0,C.rS)(),{refetchPermissions:M}=(0,C.vn)(),{pathname:A}=(0,j.TH)(),{onCloseModal:U}=(0,Te.Z)(),V=(0,j.$B)(`/plugins/${z.Z}/content-types/:uid`),J=(0,j.$B)(`/plugins/${z.Z}/component-categories/:categoryUid/:componentUid`),ne=(0,C.kY)(),{put:I,post:ge,del:w}=ne,G=(0,a.useRef)();G.current=L;const ye=N,K=V!==null,qe=K?"contentType":"component",te=K?h()(V,"params.uid",null):h()(J,"params.componentUid",null),B=(0,a.useRef)(),R=K?"content-types":"components";B.current=async()=>{try{const[{data:{data:x}},{data:{data:S}},{data:D}]=await Promise.all(["components","content-types","reserved-names"].map(be=>ne.get(`/${z.Z}/${be}`))),H=$n(x),ie=Gn(H),le=$n(S),de=Gn(le);m({type:ee.Id,components:ie,contentTypes:de,reservedNames:D})}catch(x){console.error({err:x}),g({type:"warning",message:{id:"notification.error"}})}},(0,a.useEffect)(()=>(B.current(),()=>{m({type:ee.Zl})}),[]),(0,a.useEffect)(()=>{!r&&te&&Me()},[r,A,te]),(0,a.useEffect)(()=>{N||g({type:"info",message:{id:(0,d.Z)("notification.info.autoreaload-disable")}})},[N,g]);const ke=(x,S,D,H=!1,ie,le=!1)=>{const de=H?ee.JO:ee.gz;m({type:de,attributeToSet:x,forTarget:S,targetUid:D,initialAttribute:ie,shouldAddComponentToData:le})},Ke=({attributeToSet:x,forTarget:S,targetUid:D,initialAttribute:H})=>{m({type:ee.Ir,attributeToSet:x,forTarget:S,targetUid:D,initialAttribute:H})},$e=({attributeToSet:x,forTarget:S,targetUid:D,initialAttribute:H})=>{m({type:ee.Ly,attributeToSet:x,forTarget:S,targetUid:D,initialAttribute:H})},Jt=(x,S)=>{m({type:ee.Uu,dynamicZoneTarget:x,componentsToAdd:S})},st=(x,S,D,H,ie=!1)=>{const le=S==="contentType"?ee.Sh:ee.VR;m({type:le,data:x,componentCategory:H,schemaType:S,uid:D,shouldAddComponentToData:ie})},_t=(x,S)=>{m({type:ee.o_,dynamicZoneTarget:x,newComponents:S})},en=(x,S,D="")=>{const H=x==="components"?ee.lw:ee.ai;x==="contentType"&&E("willDeleteFieldOfContentType"),m({type:H,mainDataKey:x,attributeToRemoveName:S,componentUid:D})},tn=async x=>{try{const S=`/${z.Z}/component-categories/${x}`,D=window.confirm(L({id:(0,d.Z)("popUpWarning.bodyMessage.category.delete")}));U(),D&&(f(),await w(S),await Ge(!0),await p(),await xe())}catch(S){console.error({err:S}),g({type:"warning",message:{id:"notification.error"}})}finally{p()}},ae=async()=>{try{const x=`/${z.Z}/${R}/${te}`,S=h()(u,[qe,"isTemporary"],!1),D=window.confirm(L({id:(0,d.Z)(`popUpWarning.bodyMessage.${K?"contentType":"component"}.delete`)}));if(U(),D){if(S){m({type:ee.Ap});return}f(),await w(x),await Ge(!0),await p(),await xe()}}catch(x){console.error({err:x}),g({type:"warning",message:{id:"notification.error"}})}finally{p()}},nn=async(x,S)=>{try{const D=`/${z.Z}/component-categories/${x}`;U(),f(),await I(D,S),await Ge(!0),await p(),await xe()}catch(D){console.error({err:D}),g({type:"warning",message:{id:"notification.error"}})}finally{p()}},an=()=>{const x=Object.assign({},n,u.components);if(!K){const D=h()(u,"component",{});Qe()(x,h()(D,["uid"],""),D)}const S=Oo(x);return(0,Re.Z)(S)},on=()=>{const x=Un(n),S=Un(u.components||{});return(0,Re.Z)([...S,...x])},sn=(x,S)=>{m({type:ee.NG,dzName:x,componentToRemoveIndex:S})},Me=()=>{const x=K?o:n,S=h()(x,te,{schema:{attributes:[]}}),D=(0,So.Z)(S.schema.attributes,n),H=Ao(S,D,n,K),ie=h()(S,"isTemporary",!1)&&dt()(h()(S,"schema.attributes",[]))===0;m({type:ee.xx,schemaToSet:H,hasJustCreatedSchema:ie})},we=(0,a.useMemo)(()=>{const x=K?o:n;return te==="create-content-type"?!1:!Object.keys(x).includes(te)&&!r},[n,o,te,K,r]),Ee=(0,a.useMemo)(()=>{const x=Object.keys(o).filter(S=>h()(o,[S,"schema","visible"],!0)).sort();return h()(x,"0","create-content-type")},[o]);if(we)return a.createElement(j.l_,{to:`/plugins/${z.Z}/content-types/${Ee}`});const re=async x=>{try{const S=h()(u,[qe,"isTemporary"],!1),D={components:Bo(u.components,n,te,S)};if(K){const le=F.forms.mutateContentTypeSchema({...jn(u.contentType),...x},i.contentType);if(!zo(le)){g({type:"warning",message:{id:(0,d.Z)("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}D.contentType=le,E("willSaveContentType")}else D.component=jn(u.component,!0),E("willSaveComponent");f();const H=`/${z.Z}/${R}`,ie=S?H:`${H}/${te}`;if(S?await ge(ie,D):await I(ie,D),await Ge(!0),await p(),S&&(i.contentType?.schema.kind==="collectionType"||i.contentType?.schema.kind==="singleType")&&T("contentTypeBuilder.success"),K){E("didSaveContentType");const le=h()(D,["contentType","schema","name"],""),de=h()(i,["contentType","schema","name"],"");!S&&le!==de&&E("didEditNameOfContentType")}else E("didSaveComponent");await xe()}catch(S){K||E("didNotSaveComponent"),console.error({err:S.response}),g({type:"warning",message:{id:"notification.error"}})}finally{p()}},xe=async()=>{await M()},O=(x,S,D)=>{m({type:ee.bi,data:x,schemaType:S,uid:D})};return a.createElement(ct.Z.Provider,{value:{addAttribute:ke,addCustomFieldAttribute:Ke,addCreatedComponentToDynamicZone:Jt,allComponentsCategories:xo(n,["category"]),changeDynamicZoneComponents:_t,components:n,componentsGroupedByCategory:Be()(n,"category"),componentsThatHaveOtherComponentInTheirAttributes:an(),contentTypes:o,createSchema:st,deleteCategory:tn,deleteData:ae,editCategory:nn,editCustomFieldAttribute:$e,isInDevelopmentMode:ye,initialData:i,isInContentTypeView:K,modifiedData:u,nestedComponents:on(),removeAttribute:en,removeComponentFromDynamicZone:sn,reservedNames:c,setModifiedData:Me,sortedContentTypesList:jo(o),submitData:re,updateSchema:O}},s?a.createElement(C.dO,null):a.createElement(a.Fragment,null,e,ye&&a.createElement(Zo,null)))};Xt.defaultProps={components:{}},Xt.propTypes={children:t().node.isRequired,components:t().object,contentTypes:t().object.isRequired,isLoading:t().bool.isRequired,isLoadingForDataToBeSet:t().bool.isRequired,initialData:t().object.isRequired,modifiedData:t().object.isRequired,reservedNames:t().object.isRequired};const Yo=Ko(),Qo=(0,ve.$j)(Yo,null);var Xo=(0,Xe.compose)(Qo)((0,a.memo)(Xt)),Jo=l(51216);const Kn={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,kind:null,step:null,targetUid:null,customFieldUid:null},wn=({children:e})=>{const[n,o]=(0,a.useState)(Kn),{trackUsage:r}=(0,C.rS)(),s=({attributeType:E,customFieldUid:M})=>{o(A=>({...A,actionType:"create",modalType:"customField",attributeType:E,customFieldUid:M}))},i=({attributeType:E,step:M})=>{n.forTarget==="contentType"&&r("didSelectContentTypeFieldType",{type:E}),o(A=>({...A,actionType:"create",modalType:"attribute",step:M,attributeType:E}))},u=({dynamicZoneTarget:E,targetUid:M})=>{o(A=>({...A,dynamicZoneTarget:E,targetUid:M,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},c=({forTarget:E,targetUid:M})=>{o(A=>({...A,actionType:"create",forTarget:E,targetUid:M,modalType:"chooseAttribute",isOpen:!0}))},m=E=>{o(M=>({...M,...E,isOpen:!0}))},g=E=>{o(M=>({...M,categoryName:E,actionType:"edit",modalType:"editCategory",isOpen:!0}))},f=({forTarget:E,targetUid:M,attributeName:A,attributeType:U,customFieldUid:V})=>{o(J=>({...J,modalType:"customField",customFieldUid:V,actionType:"edit",forTarget:E,targetUid:M,attributeName:A,attributeType:U,isOpen:!0}))},p=({forTarget:E,targetUid:M,attributeName:A,attributeType:U,step:V})=>{o(J=>({...J,modalType:"attribute",actionType:"edit",forTarget:E,targetUid:M,attributeName:A,attributeType:U,step:V,isOpen:!0}))},T=({modalType:E,forTarget:M,targetUid:A,kind:U})=>{o(V=>({...V,modalType:E,actionType:"edit",forTarget:M,targetUid:A,kind:U,isOpen:!0}))},v=()=>{o(Kn)},F=({forTarget:E,targetUid:M})=>{o(A=>({...A,forTarget:E,targetUid:M,modalType:"chooseAttribute"}))},N=()=>{o(E=>({...E,attributeType:"component",modalType:"attribute",step:"2"}))},L=({dynamicZoneTarget:E})=>{o(M=>({...M,dynamicZoneTarget:E,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return a.createElement(Jo.Z.Provider,{value:{...n,onClickSelectField:i,onClickSelectCustomField:s,onCloseModal:v,onNavigateToChooseAttributeModal:F,onNavigateToAddCompoToDZModal:L,onOpenModalAddComponentsToDZ:u,onNavigateToCreateComponentStep2:N,onOpenModalAddField:c,onOpenModalCreateSchema:m,onOpenModalEditCategory:g,onOpenModalEditField:p,onOpenModalEditCustomField:f,onOpenModalEditSchema:T,setFormModalNavigationState:o}},e)};wn.propTypes={children:t().node.isRequired};var _o=wn;const es=(0,a.lazy)(()=>l.e(5905).then(l.bind(l,69073)));var ts=()=>{const{url:e}=(0,j.$B)(),{categoryUid:n}=(0,j.UO)();return a.createElement(a.Suspense,{fallback:a.createElement(C.dO,null)},a.createElement(j.rs,null,a.createElement(j.AW,{path:`${e}/:componentUid`},a.createElement(es,{categoryId:n}))))},Hn=l(14911),ns=l(7563),as=l(90700),os=l(78090),ss=l(77013),rs=l(79318),is=l(28832),Yn=l(66618),ls=()=>{const{components:e,componentsGroupedByCategory:n,contentTypes:o,isInDevelopmentMode:r,sortedContentTypesList:s,modifiedData:i,initialData:u}=(0,Ze.Z)(),c=(0,C.lm)(),{trackUsage:m}=(0,C.rS)(),[g,f]=(0,a.useState)(""),{onOpenModalCreateSchema:p,onOpenModalEditCategory:T}=(0,Te.Z)(),{locale:v}=(0,q.Z)(),{startsWith:F}=(0,C.L0)(v,{sensitivity:"base"}),N=(0,C.Xe)(v,{sensitivity:"base"}),L=!Object.keys(o).some(I=>o[I].isTemporary===!0)&&!Object.keys(e).some(I=>e[I].isTemporary===!0)&&gt()(i,u),E=()=>{L?(m("willCreateContentType"),p({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):U()},M=()=>{L?(m("willCreateSingleType"),p({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):U()},A=()=>{L?(m("willCreateComponent"),p({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):U()},U=()=>{c({type:"info",message:{id:(0,d.Z)("notification.info.creating.notSaved"),defaultMessage:"Please save your work before creating a new collection type or component"}})},V=Object.entries(n).map(([I,ge])=>({name:I,title:I,isEditable:r,onClickEdit(w,G){w.stopPropagation(),L?T(G.name):U()},links:ge.map(w=>({name:w.uid,to:`/plugins/${z.Z}/component-categories/${I}/${w.uid}`,title:w.schema.displayName})).sort((w,G)=>N.compare(w.title,G.title))})).sort((I,ge)=>N.compare(I.title,ge.title)),J=s.filter(I=>I.visible);return{menu:[{name:"models",title:{id:`${(0,d.Z)("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:r&&{id:`${(0,d.Z)("button.model.create")}`,defaultMessage:"Create new collection type",onClick:E},links:J.filter(I=>I.kind==="collectionType")},{name:"singleTypes",title:{id:`${(0,d.Z)("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:r&&{id:`${(0,d.Z)("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:M},links:J.filter(I=>I.kind==="singleType")},{name:"components",title:{id:`${(0,d.Z)("menu.section.components.name")}`,defaultMessage:"Components"},customLink:r&&{id:`${(0,d.Z)("button.component.create")}`,defaultMessage:"Create a new component",onClick:A},links:V}].map(I=>I.links.some(w=>Array.isArray(w.links))?{...I,links:I.links.map(w=>{const G=w.links.filter(ye=>F(ye.title,g));return G.length===0?null:{...w,links:G.sort((ye,K)=>N.compare(ye.title,K.title))}}).filter(Boolean)}:{...I,links:I.links.filter(w=>F(w.title,g)).sort((w,G)=>N.compare(w.title,G.title))}),searchValue:g,onSearchChange:f}},us=()=>{const{menu:e,searchValue:n,onSearchChange:o}=ls(),{formatMessage:r}=(0,q.Z)();return a.createElement(as.m,{ariaLabel:r({id:`${(0,d.Z)("plugin.name")}`,defaultMessage:"Content-Types Builder"})},a.createElement(os.p,{searchable:!0,value:n,onClear:()=>o(""),onChange:s=>o(s.target.value),label:r({id:`${(0,d.Z)("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:r({id:"global.search",defaultMessage:"Search"})}),a.createElement(ss.Z,null,e.map(s=>a.createElement(a.Fragment,{key:s.name},a.createElement(rs.D,{label:r({id:s.title.id,defaultMessage:s.title.defaultMessage}),collapsable:!0,badgeLabel:s.links.length.toString()},s.links.map(i=>i.links?a.createElement(is.z,{key:i.name,label:Ce()(i.title)},i.links.map(u=>a.createElement(Yn.E,{as:Hn.OL,to:u.to,active:u.active,key:u.name,isSubSectionChild:!0},Ce()(r({id:u.name,defaultMessage:u.title}))))):a.createElement(Yn.E,{as:Hn.OL,to:i.to,active:i.active,key:i.name},Ce()(r({id:i.name,defaultMessage:i.title}))))),s.customLink&&a.createElement(W.x,{paddingLeft:7},a.createElement(ns.A,{onClick:s.customLink.onClick,startIcon:a.createElement(gn.J,{as:Fe.Z,width:(0,C.Q1)(8),height:(0,C.Q1)(8)}),marginTop:2},r({id:s.customLink.id,defaultMessage:s.customLink.defaultMessage})))))))};const Qn=(0,a.lazy)(()=>l.e(5905).then(l.bind(l,69073)));var ds=()=>{const{formatMessage:e}=(0,q.Z)(),n=e({id:`${z.Z}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:o}=(0,C.c1)(),r=(0,a.useRef)(o);return(0,a.useEffect)(()=>{r.current&&r.current("contentTypeBuilder")},[]),a.createElement(C.O4,{permissions:rt.Z.main},a.createElement(he.q,{title:n}),a.createElement(_o,null,a.createElement(Xo,null,a.createElement(Se.A,{sideNav:a.createElement(us,null)},a.createElement(a.Suspense,{fallback:a.createElement(C.dO,null)},a.createElement(j.rs,null,a.createElement(j.AW,{path:`/plugins/${z.Z}/content-types/create-content-type`,component:Qn}),a.createElement(j.AW,{path:`/plugins/${z.Z}/content-types/:uid`,component:Qn}),a.createElement(j.AW,{path:`/plugins/${z.Z}/component-categories/:categoryUid`,component:ts})))))))}},92318:function(Ne,se,l){var a=l(25158);const j=he=>`${a.Z}.${he}`;se.Z=j}}]);
